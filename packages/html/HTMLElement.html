<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>åŽŸç”Ÿçš„HTMLçš„è‡ªå®šä¹‰æ ‡ç­¾</title>
</head>

<body>
  <div>
    div
    <!-- ðŸ’Žâš½âš¾ðŸ¥ŽðŸ€ðŸðŸ’‹  ðŸŒ¸ -->
  </div>
  <div is="flag-icon">
    ðŸ’Ž
  </div>
  <flag-icon country="ðŸŒ¸">111</flag-icon>
  <div>
    <p>nihaasdasdasdasdasdasd</p>
    <p is="word-count"></p>
  </div>
</body>
<script defer>
  const supportsCustomElementsV1 = 'customElements' in window;
  console.log(supportsCustomElementsV1)
  class FlagIcon extends HTMLElement {
  constructor() {
    super();
    this._countryCode = null;
    this.addEventListener('click', this._updateRendering(0));
  }

  static observedAttributes = ["country"];

  attributeChangedCallback(name, oldValue, newValue) {
    // name will always be "country" due to observedAttributes
    this._countryCode = newValue;
    this._updateRendering(1);
  }
  connectedCallback() {
    this._updateRendering(2);
  }

  get country() {
    return this._countryCode;
  }
  set country(v) {
    this.setAttribute("country", v);
  }

  _updateRendering(i) {
    console.log('111',i)
    // Left as an exercise for the reader. But, you'll probably want to
    // check this.ownerDocument.defaultView to see if we've been
    // inserted into a document with a browsing context, and avoid
    // doing any work if not.
  }
}
  customElements.define("flag-icon", FlagIcon,{extends:'p'});
// -------------------------------------
// Create a class for the element  HTMLDivElement  HTMLParagraphElement
class WordCount extends HTMLElement {
  constructor() {
    // Always call super first in constructor
    super();
  }
  connectedCallback(){
        // count words in element's parent element
    const wcParent = this.parentNode;
    function countWords(node){
    console.log( node.innerText)
      const text = node.innerText || node.textContent;
      return text.length;
    }

    const count = `Words: ${countWords(wcParent)}`;
    console.log(this)
    // Create a shadow root
    const shadow = this.attachShadow({mode: 'open'});
    console.log(shadow)

    // Create text node and add word count to it
    const text = document.createElement('span');
    text.textContent = count;

    // Append it to the shadow root
    shadow.appendChild(text);
    // const count = `Words: ${countWords(wcParent)}`;
    //   text.textContent = count;
  }
}

// Define the new element
customElements.define('word-count', WordCount, { extends: 'p' });
// document.createElement("div", { is: "word-count" })
</script>
<style>
  flag-icon{
    width: 20px;
    height: 20px;
  }
</style>
</html>
<!-- 
è‡ªå®šä¹‰å…ƒç´ ååº”
è‡ªå®šä¹‰å…ƒç´ å¯ä»¥å®šä¹‰ç‰¹æ®Šçš„ç”Ÿå‘½å‘¨æœŸæŒ‚é’©ï¼Œç”¨äºŽåœ¨å…¶å­˜åœ¨çš„æœ‰è¶£æ—¶é—´è¿è¡Œä»£ç ã€‚è¿™äº›ç§°ä¸ºè‡ªå®šä¹‰å…ƒç´ ååº”ã€‚

    åå­—	                                                          æ‰§è¡Œæ—¶é—´
constructor	                                          åˆ›å»ºæˆ–å‡çº§å…ƒç´ å®žä¾‹ã€‚å¯ç”¨äºŽåˆå§‹çŠ¶æ€ã€è®¾ç½®æ´»åŠ¨å¬ä¼—æˆ–åˆ›å»ºé˜´å½± domã€‚è¯·å‚é˜…æœ‰å…³é™åˆ¶åœ¨ ã€‚constructor
connectedCallback	                                    æ¯æ¬¡å°†å…ƒç´ æ’å…¥ Dom æ—¶è°ƒç”¨ã€‚ç”¨äºŽè¿è¡Œè®¾ç½®ä»£ç ï¼Œå¦‚èŽ·å–èµ„æºæˆ–æ¸²æŸ“ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä½ åº”è¯¥å°½é‡æŠŠå·¥ä½œæŽ¨è¿Ÿåˆ°è¿™ä¸ªæ—¶å€™ã€‚
disconnectedCallback	                                æ¯æ¬¡ä»Ž Dom ä¸­åˆ é™¤å…ƒç´ æ—¶éƒ½ä¼šè°ƒç”¨ã€‚ç”¨äºŽè¿è¡Œæ¸…ç†ä»£ç ã€‚
attributeChangedCallback(attrName, oldVal, newVal)	  å½“å·²æ·»åŠ ã€åˆ é™¤ã€æ›´æ–°æˆ–æ›¿æ¢æ‰€è§‚å¯Ÿåˆ°çš„å±žæ€§æ—¶è°ƒç”¨ã€‚å½“è§£æžå™¨åˆ›å»ºæˆ–å‡çº§å…ƒç´ æ—¶ï¼Œä¹Ÿéœ€è¦åˆå§‹å€¼ã€‚æ³¨æ„ï¼šåªæœ‰å±žæ€§ä¸­åˆ—å‡ºçš„å±žæ€§æ‰ä¼šæ”¶åˆ°æ­¤å›žè°ƒã€‚observedAttributes
adoptedCallback	è‡ªå®šä¹‰å…ƒç´ å·²ç§»å…¥ä¸€ä¸ªæ–°çš„ï¼ˆä¾‹å¦‚æœ‰äººè°ƒç”¨ï¼‰ã€‚documentdocument.adoptNode(el)

connectedCallbackï¼šå½“ custom elementé¦–æ¬¡è¢«æ’å…¥æ–‡æ¡£DOMæ—¶ï¼Œè¢«è°ƒç”¨ã€‚
disconnectedCallbackï¼šå½“ custom elementä»Žæ–‡æ¡£DOMä¸­åˆ é™¤æ—¶ï¼Œè¢«è°ƒç”¨ã€‚
adoptedCallbackï¼šå½“ custom elementè¢«ç§»åŠ¨åˆ°æ–°çš„æ–‡æ¡£æ—¶ï¼Œè¢«è°ƒç”¨ã€‚
attributeChangedCallback: å½“ custom elementå¢žåŠ ã€åˆ é™¤ã€ä¿®æ”¹è‡ªèº«å±žæ€§æ—¶ï¼Œè¢«è°ƒç”¨ã€‚
 -->
